{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "nrc-input",
  "type": "registry:ui",
  "title": "Myanmar NRC Input",
  "description": "A simple myanmar nrc input component.",
  "registryDependencies": [
    "select",
    "input"
  ],
  "files": [
    {
      "path": "src/registry/new-york/ui/nrc-input.tsx",
      "content": "'use client';\n\nimport { Input } from '@/components/ui/input';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport * as React from 'react';\n\nimport { cn } from '@/lib/utils';\nimport { NRC_STATES, NRC_TOWNSHIPS, NRC_TYPES } from 'public/nrc.min.json';\n\nexport const enNrcPattern =\n  /^([1-9]|1[0-3])\\/([A-Z]{6,9})\\((N|E|P|T|Y|S)\\)([0-9]{6})$/;\n\nexport const mmNrcPattern =\n  /^([၁-၉]|1[၀-၃])\\/([က-အ]{3,3})\\((နိုင်|ဧည့်|ပြု|သာသနာ|ယာယီ|စ)\\)([၀-၉]{6})$/;\n\ntype NRCState = {\n  stateId: string;\n  townshipId: string;\n  typeId: string;\n  number: string;\n};\n\ntype NRCAction = {\n  setStateId: (id: string) => void;\n  setTownshipId: (id: string) => void;\n  setTypeId: (id: string) => void;\n  setNumber: (number: string) => void;\n};\n\ntype NRCInputContext = NRCState & NRCAction;\n\nconst NRCInputContext = React.createContext<NRCInputContext>(\n  {} as NRCInputContext\n);\n\nconst initialState: NRCState = {\n  stateId: '',\n  townshipId: '',\n  typeId: '',\n  number: '',\n};\n\nconst useNRCInput = () => {\n  const context = React.useContext(NRCInputContext);\n\n  if (!context) {\n    throw new Error('useNRCInput should be used within <NRCInput>');\n  }\n\n  return context;\n};\n\nfunction NRCInput({\n  className,\n  defaultValue,\n  onValueChange,\n  ...props\n}: React.ComponentProps<'div'> & {\n  defaultValue?: string;\n  onValueChange?: (data: string) => void;\n}) {\n  const [stateId, setStateId] = React.useState('');\n  const [townshipId, setTownshipId] = React.useState('');\n  const [typeId, setTypeId] = React.useState('');\n  const [number, setNumber] = React.useState('');\n\n  const [state, setState] = React.useState('');\n  const [township, setTownship] = React.useState('');\n  const [type, setType] = React.useState('');\n\n  React.useEffect(() => {\n    if (stateId) setState(NRC_STATES.find((s) => s.id === stateId)?.en ?? '');\n  }, [stateId]);\n\n  React.useEffect(() => {\n    if (stateId && townshipId)\n      setTownship(\n        NRC_TOWNSHIPS[stateId as keyof typeof NRC_TOWNSHIPS].find(\n          (ts) => ts.id === townshipId\n        )?.en ?? ''\n      );\n  }, [stateId, townshipId]);\n\n  React.useEffect(() => {\n    if (typeId) setType(NRC_TYPES.find((t) => t.id === typeId)?.en ?? '');\n  }, [typeId]);\n\n  React.useEffect(() => {\n    if (onValueChange) onValueChange(`${state}/${township}(${type})${number}`);\n  }, [state, township, type, number]);\n\n  return (\n    <NRCInputContext.Provider\n      value={{\n        stateId,\n        townshipId,\n        typeId,\n        number,\n        setStateId,\n        setTownshipId,\n        setTypeId,\n        setNumber,\n      }}\n    >\n      <div\n        data-slot='nrc-input'\n        className={cn('flex flex-wrap gap-1', className)}\n        {...props}\n      />\n    </NRCInputContext.Provider>\n  );\n}\n\nfunction NRCStateInput({\n  ...props\n}: React.ComponentProps<typeof SelectTrigger>) {\n  const { stateId, setStateId } = useNRCInput();\n\n  return (\n    <Select onValueChange={setStateId} defaultValue={stateId}>\n      <SelectTrigger {...props} aria-invalid={false}>\n        <SelectValue placeholder='State' />\n      </SelectTrigger>\n      <SelectContent>\n        {NRC_STATES.map((state) => (\n          <SelectItem key={state.id} value={state.id}>\n            {state.en}\n          </SelectItem>\n        ))}\n      </SelectContent>\n    </Select>\n  );\n}\n\nfunction NRCTownshipInput({\n  ...props\n}: React.ComponentProps<typeof SelectTrigger>) {\n  const { stateId, townshipId, setTownshipId } = useNRCInput();\n\n  const townships = React.useMemo(() => {\n    if (stateId === '') return [];\n    const key = stateId as keyof typeof NRC_TOWNSHIPS;\n    return NRC_TOWNSHIPS[key];\n  }, [stateId]);\n\n  return (\n    <Select\n      disabled={!stateId}\n      onValueChange={setTownshipId}\n      defaultValue={townshipId}\n    >\n      <SelectTrigger {...props} aria-invalid={false}>\n        <SelectValue placeholder='Township' />\n      </SelectTrigger>\n      <SelectContent>\n        {townships.map((township) => (\n          <SelectItem key={township.id} value={township.id}>\n            {township.en}\n          </SelectItem>\n        ))}\n      </SelectContent>\n    </Select>\n  );\n}\n\nfunction NRCTypeInput({\n  ...props\n}: React.ComponentProps<typeof SelectTrigger>) {\n  const { typeId, setTypeId } = useNRCInput();\n\n  return (\n    <Select onValueChange={setTypeId} defaultValue={typeId}>\n      <SelectTrigger {...props} aria-invalid={false}>\n        <SelectValue placeholder='Type' />\n      </SelectTrigger>\n      <SelectContent>\n        {NRC_TYPES.map((type) => (\n          <SelectItem key={type.id} value={type.id}>\n            {type.en}\n          </SelectItem>\n        ))}\n      </SelectContent>\n    </Select>\n  );\n}\n\nfunction NRCNumberInput({ ...props }: React.ComponentProps<typeof Input>) {\n  const { number, setNumber } = useNRCInput();\n\n  return (\n    <Input\n      {...props}\n      aria-invalid={false}\n      placeholder='Number'\n      value={number}\n      maxLength={6}\n      onChange={(e) => {\n        setNumber(e.target.value);\n      }}\n    />\n  );\n}\n\nfunction parseNRC(value?: string) {\n  if (!value) return initialState;\n\n  const match = value.match(enNrcPattern);\n\n  if (!match) return initialState;\n\n  const [, state, township, type, number] = match;\n\n  const stateId = NRC_STATES.find((s) => s.en === state)?.id ?? '';\n  const townshipId =\n    NRC_TOWNSHIPS[stateId as keyof typeof NRC_TOWNSHIPS].find(\n      (t) => t.en === township\n    )?.id ?? '';\n  const typeId = NRC_TYPES.find((t) => t.en === type)?.id ?? '';\n\n  console.log({ stateId, townshipId, typeId, number });\n  return { stateId, townshipId, typeId, number };\n}\n\nexport {\n  NRCInput,\n  NRCNumberInput,\n  NRCStateInput,\n  NRCTownshipInput,\n  NRCTypeInput,\n};\n",
      "type": "registry:ui"
    }
  ]
}